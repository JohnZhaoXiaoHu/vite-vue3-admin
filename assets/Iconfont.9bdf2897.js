var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,i,l)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[i]=l,r=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&n(e,i,t[i]);if(l)for(var i of l(t))a.call(t,i)&&n(e,i,t[i]);return e},s=(e,l)=>t(e,i(l));import{d as c,bc as d,bd as m,be as u,bf as g,bg as p,bh as v,ag as h,r as b,s as f,u as y,q as w,E as S,e as k,c as O,i as C,G as I,j as x,w as j,n as U,a2 as L,a0 as E,t as P,b5 as _,b6 as z,p as R,h as V,b as M}from"./vendor.f13de6ab.js";/* empty css              */import{I as N}from"./icon-font.deb5a5ed.js";import"./index.fc610771.js";function W(e){const t=e.lastIndexOf("/")+1;let i=e.substring(t);return i=decodeURI(i.split("?")[0]),i}var D=c({name:"PreviewModal",components:{ZoomInOutlined:d,ZoomOutOutlined:m,RedoOutlined:u,DownloadOutlined:g,CloseCircleOutlined:p,OneToOneOutlined:v,[h.name]:h},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"image"},url:{type:String,default:""}},emits:["update:visible"],setup(e,{emit:t}){const i=b();let l;const o=f({timer:null,loading:!1,rotateDeg:0,imgScale:1,scaleCV:.07,initWidth:0,initHeight:0,contentStyle:{width:"60vw",height:"60vh"},imgStyle:{width:"",height:"",transform:"rotate(0)"}}),a=y({get:()=>e.visible,set:e=>t("update:visible",e)}),n=(e="scale")=>{var t;o.imgStyle.width=o.initWidth*o.imgScale+"px",o.imgStyle.height=o.initHeight*o.imgScale+"px","init"===e?(o.imgStyle.maxWidth="",o.imgStyle.maxHeight=""):(o.imgStyle.maxWidth="none!important",o.imgStyle.maxHeight="none!important"),clearTimeout(l),l=setTimeout((()=>{var e;return null==(e=i.value)?void 0:e.classList.remove("active")}),1400),null==(t=i.value)||t.classList.add("active"),o.contentStyle={}};return s(r({},w(o)),{imgScaleMask:i,isVisible:a,rotateImg:()=>{o.rotateDeg-=90,o.imgStyle.transform=`rotate(${o.rotateDeg}deg)`},saveImg:e=>{!function({url:e,target:t="_blank",fileName:i}){const l=new URL(e).host==location.host;new Promise(((o,a)=>{if(l){const l=document.createElement("a");if(l.href=e,l.target=t,void 0!==l.download&&(l.download=i||W(e)),document.createEvent){const e=document.createEvent("MouseEvents");return e.initEvent("click",!0,!0),l.dispatchEvent(e),o(!0)}return-1===e.indexOf("?")&&(e+="?download"),window.open(e,t),o(!0)}{const t=document.createElement("canvas"),i=document.createElement("img");i.setAttribute("crossOrigin","Anonymous"),i.src=e,i.onload=l=>{t.width=i.width,t.height=i.height,t.getContext("2d").drawImage(i,0,0,i.width,i.height),t.toBlob((t=>{const i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download=W(e),i.click(),URL.revokeObjectURL(i.href),o(!0)}),"image/jpeg")},i.onerror=e=>a(e)}}))}({url:e})},zoomInImg:()=>{o.imgScale+=o.scaleCV,n()},zoomOutImg:()=>{o.imgScale-=o.scaleCV,n()},handZoom:n,imgLoaded:e=>{var t;if(null==(t=e.currentTarget)?void 0:t.complete){const{width:t,height:i}=getComputedStyle(e.currentTarget);o.imgStyle.width=t,o.imgStyle.height=i,o.initWidth=parseFloat(t),o.initHeight=parseFloat(i)}},resetImg:()=>{o.imgScale=1,n()}})}});const H=["src"],T=["src"],A={key:0,class:"toolbar"};D.render=function(e,t,i,l,o,a){const n=S("close-circle-outlined"),r=S("a-spin"),s=S("zoom-in-outlined"),c=S("zoom-out-outlined"),d=S("one-to-one-outlined"),m=S("redo-outlined"),u=S("download-outlined");return k(),O(_,{to:"body"},[e.isVisible?(k(),C("div",{key:0,class:"preview-modal",onClick:t[5]||(t[5]=L((t=>e.isVisible=!1),["self"]))},[I(n,{class:"close-icon",onClick:t[0]||(t[0]=t=>e.isVisible=!1)}),x("div",{class:"preview-content",style:U(e.contentStyle)},[I(r,{spinning:e.loading},{default:j((()=>["image"===e.type?(k(),C("img",{key:0,ref:"img",style:U(e.imgStyle),src:e.url,alt:"",onLoad:t[1]||(t[1]=L(((...t)=>e.imgLoaded&&e.imgLoaded(...t)),["stop"]))},null,44,H)):E("",!0),"video"===e.type?(k(),C("video",{key:1,ref:"video",src:e.url,controls:"",autoplay:"",onCanplay:t[2]||(t[2]=t=>e.loading=!1),onLoadstart:t[3]||(t[3]=t=>e.loading=!0)},null,40,T)):E("",!0),x("div",{ref:"imgScaleMask",class:"img-scale-mask"},P(~~(100*e.imgScale)+"%"),513)])),_:1},8,["spinning"])],4),"image"===e.type?(k(),C("div",A,[I(s,{title:"放大",onClick:e.zoomInImg},null,8,["onClick"]),I(c,{title:"缩放",onClick:e.zoomOutImg},null,8,["onClick"]),I(d,{title:"原始比例",onClick:e.resetImg},null,8,["onClick"]),I(m,{title:"旋转",onClick:e.rotateImg},null,8,["onClick"]),I(u,{title:"下载",onClick:t[4]||(t[4]=t=>e.saveImg(e.url))})])):E("",!0)])):E("",!0)])};var F=c({name:"CustomModal",components:{[z.name]:z,IconFont:N,PreviewModal:D},setup(){const e=f({scriptUrl:"",iconName:"",visible:!1,imageUrl:""});return s(r({},w(e)),{showPreview:t=>{e.imageUrl=t.target.currentSrc,e.visible=!0}})}});R("data-v-4f5cc384");const Z=M(" 示意图："),q=M(" (例如：//at.alicdn.com/t/font_1166867_7zdsgx6x88l.js) "),B=M(" （例如：icon-huanfu1、icon-zhutipifu、icon-xinwendongtai1） "),G={key:1};V(),F.render=function(e,t,i,l,o,a){const n=S("a-alert"),r=S("preview-modal"),s=S("a-input"),c=S("a-form-item"),d=S("icon-font"),m=S("a-form"),u=S("a-card");return k(),C("div",null,[I(n,{message:"自定义图标",description:"使用阿里图标库，可以有效减小项目的体积，支持离线本地图标和在线图标",type:"info","show-icon":"",style:{"margin-bottom":"12px"}}),I(u,null,{default:j((()=>[Z,x("img",{class:"image-demo",src:"http://ww1.sinaimg.cn/large/005IOlAWgy1gl8bm4ot9dj314r0opabq.jpg",onClick:t[0]||(t[0]=(...t)=>e.showPreview&&e.showPreview(...t))}),e.visible?(k(),O(r,{key:0,visible:e.visible,"onUpdate:visible":t[1]||(t[1]=t=>e.visible=t),type:"image",url:e.imageUrl},null,8,["visible","url"])):E("",!0),I(m,null,{default:j((()=>[I(c,{label:"阿里图标路径"},{default:j((()=>[I(s,{value:e.scriptUrl,"onUpdate:value":t[2]||(t[2]=t=>e.scriptUrl=t),style:{width:"400px"},placeholder:"请输入你的阿里巴巴矢量图标库项目图标的路径"},null,8,["value"]),q])),_:1}),I(c,{label:"图标名字"},{default:j((()=>[I(s,{value:e.iconName,"onUpdate:value":t[3]||(t[3]=t=>e.iconName=t),placeholder:"请输入图标的名字",style:{width:"200px"}},null,8,["value"]),B])),_:1}),I(c,{label:"效果"},{default:j((()=>[e.scriptUrl&&e.iconName?(k(),O(d,{key:0,"script-url":e.scriptUrl,type:e.iconName,size:"30"},null,8,["script-url","type"])):(k(),C("span",G,"可以复制示例的地址和图标查看效果"))])),_:1})])),_:1})])),_:1})])},F.__scopeId="data-v-4f5cc384";export{F as default};
