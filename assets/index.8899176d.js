var e,t=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;import{d as n,r as d,s as c,u as p,q as u,M as m,G as f,aU as b,E as y,b8 as g,e as w,c as h,w as v,l as x,b as D}from"./vendor.f13de6ab.js";import{_ as I}from"./index.e22eb348.js";import{A as S,R as C,j as O,l as j}from"./index.fc610771.js";function T(t){return S.request({url:e.adminDictConfig,method:C.GET,params:t})}function R(t){return S.request({url:[e.adminDictConfig,t].join("/"),method:C.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}(e||(e={})).adminDictConfig="/admin/dict_config";const q=[{title:"ID",dataIndex:"id"},{title:"label值",dataIndex:"label"},{title:"分类",dataIndex:"category"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"updatedAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>O(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>O(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await R(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:t},a)=>j({title:"编辑字典",fields:t,formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(s,l)=>{return await(r=t.id,o=s,S.request({url:[e.adminDictConfig,r].join("/"),method:C.PATCH,params:o},{isShowErrorMessage:!0,successMessageText:"修改成功"})).then((e=>a()));var r,o}})}]}];var E=n({name:"SystemDict",components:{DynamicTable:I},setup(){const t=d(),n=c({tableLoading:!1,rowSelection:{onChange:(e,t)=>{n.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),y=p((()=>0==n.rowSelection.selectedRowKeys.length));return g=((e,t)=>{for(var a in t||(t={}))r.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&i(e,a,t[a]);return e})({},u(n)),a(g,s({columns:q,tableRef:t,isDisabled:y,getAdminDictConfig:T,addItem:()=>{j({title:"添加字典",formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(a,s)=>{var l,r;await(r=a,S.request({url:e.adminDictConfig,method:C.POST,params:r},{isShowErrorMessage:!0,successMessageText:"创建成功"})),null==(l=t.value)||l.refreshTableData()}})},deleteItems:()=>{m.confirm({title:"提示",icon:f(b),content:"您确定要删除所有选中吗？",onOk:async()=>{var e;await R(n.rowSelection.selectedRowKeys.toString()),null==(e=t.value)||e.refreshTableData(),n.rowSelection.selectedRowKeys=[]}})}}));var g}});const A=D(" 新增字典 "),k=D(" 删除 ");E.render=function(e,t,a,s,l,r){const o=y("a-button"),i=y("dynamic-table"),n=g("permission");return w(),h(i,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminDictConfig,rowKey:"id","row-selection":e.rowSelection},{title:v((()=>[x(f(o,{type:"primary",onClick:e.addItem},{default:v((()=>[A])),_:1},8,["onClick"]),[[n,{action:"create",effect:"disabled"}]]),x(f(o,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:v((()=>[k])),_:1},8,["disabled","onClick"]),[[n,{action:"delete",effect:"disabled"}]])])),_:1},8,["columns","get-list-func","row-selection"])};export{E as default};
