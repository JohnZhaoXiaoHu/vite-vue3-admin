System.register(["./vendor-legacy.e71c8e14.js","./index-legacy.b24d49a4.js","./index-legacy.b2e53b1b.js"],(function(e){"use strict";var t,a,l,s,i,n,o,r,d,c,u,p,m,f,b,y,g,h,w,x;return{setters:[function(e){t=e.d,a=e.r,l=e.s,s=e.u,i=e.q,n=e.M,o=e.G,r=e.aU,d=e.E,c=e.b8,u=e.e,p=e.c,m=e.w,f=e.l,b=e.b},function(e){y=e._},function(e){g=e.A,h=e.R,w=e.j,x=e.l}],execute:function(){var D;function S(e){return g.request({url:D.adminDictConfig,method:h.GET,params:e})}function v(e){return g.request({url:[D.adminDictConfig,e].join("/"),method:h.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}(D||(D={})).adminDictConfig="/admin/dict_config";const I=[{title:"ID",dataIndex:"id"},{title:"label值",dataIndex:"label"},{title:"分类",dataIndex:"category"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"updatedAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>w(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>w(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await v(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:e},t)=>x({title:"编辑字典",fields:e,formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(a,l)=>{return await(s=e.id,i=a,g.request({url:[D.adminDictConfig,s].join("/"),method:h.PATCH,params:i},{isShowErrorMessage:!0,successMessageText:"修改成功"})).then((e=>t()));var s,i}})}]}];var C=e("default",t({name:"SystemDict",components:{DynamicTable:y},setup(){const e=a(),t=l({tableLoading:!1,rowSelection:{onChange:(e,a)=>{t.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),d=s((()=>0==t.rowSelection.selectedRowKeys.length));return{...i(t),columns:I,tableRef:e,isDisabled:d,getAdminDictConfig:S,addItem:()=>{x({title:"添加字典",formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(t,a)=>{var l;await(l=t,g.request({url:D.adminDictConfig,method:h.POST,params:l},{isShowErrorMessage:!0,successMessageText:"创建成功"})),e.value?.refreshTableData()}})},deleteItems:()=>{n.confirm({title:"提示",icon:o(r),content:"您确定要删除所有选中吗？",onOk:async()=>{await v(t.rowSelection.selectedRowKeys.toString()),e.value?.refreshTableData(),t.rowSelection.selectedRowKeys=[]}})}}}}));const T=b(" 新增字典 "),R=b(" 删除 ");C.render=function(e,t,a,l,s,i){const n=d("a-button"),r=d("dynamic-table"),b=c("permission");return u(),p(r,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminDictConfig,rowKey:"id","row-selection":e.rowSelection},{title:m((()=>[f(o(n,{type:"primary",onClick:e.addItem},{default:m((()=>[T])),_:1},8,["onClick"]),[[b,{action:"create",effect:"disabled"}]]),f(o(n,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:m((()=>[R])),_:1},8,["disabled","onClick"]),[[b,{action:"delete",effect:"disabled"}]])])),_:1},8,["columns","get-list-func","row-selection"])}}}}));
