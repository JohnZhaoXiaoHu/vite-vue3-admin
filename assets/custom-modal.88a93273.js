import{b1 as e,b2 as t,r as o,C as n,f as l,aB as a,b3 as s,b4 as i,d as r,E as u,e as c,i as d,F as f,c as v,j as p,G as m,w as y,l as h,v as g,a8 as b,T as x,t as R,a as T,a0 as L,b5 as z,b as C,s as E,aD as k,b6 as w}from"./vendor.f13de6ab.js";/* empty css              */var B,_={},M={exports:{}};(B=M).exports=function(e){return e&&e.__esModule?e:{default:e}},B.exports.default=B.exports,B.exports.__esModule=!0;var H=e(t),P={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(P);var W=M.exports;Object.defineProperty(_,"__esModule",{value:!0}),_.default=_.collapseMotion=_.TransitionGroup=_.Transition=_.getTransitionGroupProps=A=_.getTransitionProps=void 0;var O=H,j=W(P.exports),A=_.getTransitionProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e?(0,j.default)({appear:!0,appearToClass:"".concat(e,"-appear ").concat(e,"-appear-active"),enterFromClass:"".concat(e,"-enter ").concat(e,"-enter-prepare"),enterToClass:"".concat(e,"-enter ").concat(e,"-enter-active"),leaveFromClass:" ".concat(e,"-leave"),leaveActiveClass:"".concat(e,"-leave ").concat(e,"-leave-active"),leaveToClass:"".concat(e,"-leave ").concat(e,"-leave-active")},t):(0,j.default)({css:!1},t);return o};_.getTransitionGroupProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e?(0,j.default)({appear:!0,appearActiveClass:"".concat(e),appearToClass:"".concat(e,"-appear ").concat(e,"-appear-active"),enterFromClass:"".concat(e,"-appear ").concat(e,"-enter ").concat(e,"-appear-prepare ").concat(e,"-enter-prepare"),enterActiveClass:"".concat(e),enterToClass:"".concat(e,"-enter ").concat(e,"-appear ").concat(e,"-appear-active ").concat(e,"-enter-active"),leaveActiveClass:"".concat(e," ").concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-active")},t):(0,j.default)({css:!1},t);return o};var F=O.Transition,G=_.Transition=F,X=O.TransitionGroup;_.TransitionGroup=X;_.collapseMotion=function(e,t){return{name:"ant-motion-collapse",appear:!0,css:!0,onBeforeEnter:function(o){t.value="ant-motion-collapse",e.value={height:0,opacity:0}},onEnter:function(t){(0,O.nextTick)((function(){e.value=function(e){return{height:"".concat(e.scrollHeight,"px"),opacity:1}}(t)}))},onAfterEnter:function(){t.value="",e.value={}},onBeforeLeave:function(o){t.value="ant-motion-collapse",e.value=function(e){return{height:"".concat(e.offsetHeight,"px")}}(o)},onLeave:function(t){window.setTimeout((function(){e.value={height:0,opacity:0}}))},onAfterLeave:function(){t.value="",e.value={}}}};var Y=F;function S(e,{emit:t,attrs:r}){const u=o(null),c=o(null),d=o(null),f=o(null),v=o(null),p=o(null),m=o(null),y=o(null),h=o(null),g=o(null),b=o(null),x=o(null),R=o(null),T=o(null),L=o(null),z=o(null),C={x:0,y:0},E=e=>Object.assign(C,{x:e.pageX,y:e.pageY});document.documentElement.addEventListener("click",E,!0);const k=A("fade"),w=A("zoom",{onAfterLeave:()=>t("update:visible",!1)});let B,_,M,H,P,W=0;function O(e,t,o,n,l,a){t.onmousedown=function(s){const i=s.clientX-t.offsetLeft,r=s.clientY-t.offsetTop,u=e.offsetTop,c=e.offsetLeft,f=e.offsetWidth,v=e.offsetHeight,p=s=>{const p=s.clientX-i,m=s.clientY-r,y=document.documentElement.clientWidth-e.offsetLeft-2,h=document.documentElement.clientHeight-e.offsetTop-2;let g=o?f-p:t.offsetWidth+p,b=n?v-m:t.offsetHeight+m;return o&&(e.style.left=c+p+"px"),n&&(e.style.top=u+m+"px"),g<400&&(g=400),g>y&&(g=y),l||(d.value.style.width=g+"px"),b<140&&(b=140),b>h&&(b=h),a||(d.value.style.height=b-W-P+"px"),(o&&400==g||n&&140==b)&&(document.onmousemove=null),(o||n)&&(document.onmousemove=null),!1},m=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),!1}}const j=()=>{!function(e,t){let o=0;(t=t||e).style.cursor="move",t.onmousedown=function(t){o=t.clientX-e.offsetLeft;const n=t.clientY-e.offsetTop,l=t=>{let l=t.clientX-o,a=t.clientY-n;const s=document.documentElement.clientWidth-e.offsetWidth,i=document.documentElement.clientHeight-e.offsetHeight;return l<=0&&(l=0),a<=0&&(a=0),l>=s&&(l=s),a>=i&&(a=i),e.style.left=l+"px",e.style.top=a+"px",!1},a=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a)};return document.addEventListener("mousemove",l),document.addEventListener("mouseup",a),!1},L.value.onclick=function(){const{left:t,top:o}=getComputedStyle(e),{width:n,height:l}=getComputedStyle(d.value);B=n,_=l,M=t,H=o,e.style.top=e.style.left=0,e.style.width=document.documentElement.clientWidth-2+"px",e.style.height=document.documentElement.clientHeight-2+"px",d.value.style.width=e.style.width,d.value.style.height=parseFloat(e.style.height)-P-W+"px",this.style.display="none",z.value.style.display="block"},z.value.onclick=function(){d.value.style.height=_,d.value.style.width=B,e.style.width=e.style.height="unset",e.style.left=M,e.style.top=H,this.style.display="none",L.value.style.display="block"}}(u.value,v.value),O(u.value,g.value,!0,!0,!1,!1),O(u.value,b.value,!1,!0,!1,!1),O(u.value,x.value,!1,!1,!1,!1),O(u.value,R.value,!0,!1,!1,!1),O(u.value,p.value,!0,!1,!1,!0),O(u.value,m.value,!1,!0,!0,!1),O(u.value,y.value,!1,!1,!1,!0),O(u.value,h.value,!1,!1,!0,!1),u.value.style.left=(document.documentElement.clientWidth-u.value.offsetWidth)/2+"px",u.value.style.top=e.centered?(document.documentElement.clientHeight-u.value.offsetHeight)/2+"px":"100px";const{left:t,top:o}=u.value.getBoundingClientRect(),{x:n,y:l}=C;c.value.style.transformOrigin=`${n-t}px ${l-o}px`},F=n(j,30);return l((()=>{a((()=>e.visible),(e=>{e&&(i((()=>{var e,t;P=(null==(e=v.value)?void 0:e.offsetHeight)||0,W=(null==(t=f.value)?void 0:t.offsetHeight)||0,j()})),window.addEventListener("resize",F))}),{immediate:!0})})),s((()=>{window.removeEventListener("resize",F),document.documentElement.removeEventListener("click",E,!0)})),{dragRef:u,modalWrapRef:c,modalBody:d,modalFooter:f,titleRef:v,resizeLRef:p,resizeTRef:m,resizeRRef:y,resizeBRef:h,resizeLTRef:g,resizeTRRef:b,resizeBRRef:x,resizeLBRef:R,minRef:T,maxRef:L,revertRef:z,maskTransitionProps:k,dialogTransitionProps:w,closeModal:()=>{t("update:visible",!1)}}}_.default=Y;var $=r({name:"ACustomModal",components:{Transition:G},props:{title:{type:String,default:"标题"},visible:{type:Boolean,default:!1},destroyOnClose:{type:Boolean,default:!1},footer:{type:[Object,String],default:"I am footer"},confirmLoading:{type:Boolean,default:!1},centered:{type:Boolean,default:!1}},emits:["update:visible"],setup:(e,t)=>S(e,t)});const D={ref:"modalRootRef",class:"ant-modal-root custom-modal"},I={class:"ant-modal-mask"},U={key:0,ref:"modalWrapRef",class:"ant-modal-wrap"},q={ref:"dragRef",class:"ant-modal"},J={class:"ant-modal-content"},K={ref:"titleRef",class:"ant-modal-header"},N={class:"ant-modal-title"},Q={class:"ant-modal-operate"},V={ref:"minRef",type:"button",class:"min",title:"最小化"},Z={ref:"maxRef",type:"button",class:"max",title:"最大化"},ee={ref:"revertRef",type:"button",class:"revert",title:"还原"},te={ref:"resizeLRef",class:"resizeL"},oe={ref:"resizeTRef",class:"resizeT"},ne={ref:"resizeRRef",class:"resizeR"},le={ref:"resizeBRef",class:"resizeB"},ae={ref:"resizeLTRef",class:"resizeLT"},se={ref:"resizeTRRef",class:"resizeTR"},ie={ref:"resizeBRRef",class:"resizeBR"},re={ref:"resizeLBRef",class:"resizeLB"},ue={ref:"modalBody",class:"ant-modal-body"},ce=C(" ① 窗口可以拖动；"),de=p("br",null,null,-1),fe=C(" ② 窗口可以通过八个方向改变大小；"),ve=p("br",null,null,-1),pe=C(" ③ 窗口可以最小化、最大化、还原、关闭；"),me=p("br",null,null,-1),ye=C(" ④ 限制窗口最小宽度/高度。 "),he={key:0,ref:"modalFooter",class:"ant-modal-footer"},ge=C("取 消"),be=C("确 认");$.render=function(e,t,o,n,l,a){const s=u("a-button");return e.destroyOnClose&&!e.visible?(c(),d(f,{key:0},[],64)):(c(),v(z,{key:1,to:"body"},[p("div",D,[m(x,b({key:"mask"},e.maskTransitionProps),{default:y((()=>[h(p("div",I,null,512),[[g,e.visible]])])),_:1},16),m(x,b({key:"dialog"},e.dialogTransitionProps),{default:y((()=>[e.visible?(c(),d("div",U,[p("div",q,[p("div",J,[p("div",K,[p("span",N,R(e.title),1),p("div",Q,[p("button",V,null,512),p("button",Z,null,512),p("button",ee,null,512),p("button",{type:"button",class:"close",title:"关闭",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t))})])],512),p("div",te,null,512),p("div",oe,null,512),p("div",ne,null,512),p("div",le,null,512),p("div",ae,null,512),p("div",se,null,512),p("div",ie,null,512),p("div",re,null,512),p("div",ue,[T(e.$slots,"default",{},(()=>[ce,de,fe,ve,pe,me,ye]))],512),null!=e.footer?(c(),d("div",he,[T(e.$slots,"footer",{},(()=>[p("div",null,[m(s,{onClick:e.closeModal},{default:y((()=>[ge])),_:1},8,["onClick"]),m(s,{type:"primary",loading:e.confirmLoading,onClick:e.closeModal},{default:y((()=>[be])),_:1},8,["loading","onClick"])])]))],512)):L("",!0)])],512)],512)):L("",!0)])),_:3},16)],512)]))};const xe=C("弹出弹窗");var Re=r({setup(e){const t=E({visible:!1});return(e,o)=>{const n=u("a-button"),l=u("a-card");return c(),d("div",null,[m(k(w),{message:"自定义模态框",description:"沿用ant-design-vue的modal样式，自定义一个可拖拽、可调整大小的模态框",type:"info","show-icon":"",style:{"margin-bottom":"12px"}}),m(l,null,{default:y((()=>[m(n,{type:"primary",onClick:o[0]||(o[0]=e=>k(t).visible=!0)},{default:y((()=>[xe])),_:1})])),_:1}),m(k($),{visible:k(t).visible,"onUpdate:visible":o[1]||(o[1]=e=>k(t).visible=e)},null,8,["visible"])])}}});export{Re as default};
