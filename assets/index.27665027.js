var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{p as c,h as d,e as r,i as m,l as p,v as f,j as v,as as y,at as h,ap as b,au as g,av as k,aw as _,ax as O,ay as C,az as P,aA as w,d as I,$ as K,_ as L,s as F,u as T,aB as x,aC as M,q as S,A as j,aD as E,E as V,G as A,w as R,a2 as q,F as D,k as U,c as H,t as B,H as $,K as G,b as J,ao as N,a8 as W,a0 as z,aE as Q,aF as Z,aG as X,aH as Y,aI as ee,aJ as ae,aK as te,aL as le,Z as ne,aM as oe,aN as se,Q as ue,aO as ie,aP as ce,aQ as de,aR as re,aS as me,aT as pe,M as fe,aU as ve,am as ye,a9 as he,aV as be,r as ge,aW as ke}from"./vendor.f13de6ab.js";import{_ as _e}from"./logo.d49f8590.js";import{u as Oe,S as Ce,T as Pe,r as we}from"./index.fc610771.js";import{I as Ie}from"./icon-font.deb5a5ed.js";const Ke={name:"Logo",props:{collapsed:{type:Boolean}}};c("data-v-ff08df18");const Le={class:"logo"},Fe=v("img",{src:_e,alt:""},null,-1),Te={class:"title"};d(),Ke.render=function(e,a,t,l,n,o){return r(),m("div",Le,[Fe,p(v("h2",Te,"One Piece",512),[[f,!t.collapsed]])])},Ke.__scopeId="data-v-ff08df18";var xe=Ke,Me={[y.name]:y,[y.TabPane.name]:y.TabPane,[h.name]:h,[b.name]:b,MinusOutlined:g,DownOutlined:k,ReloadOutlined:_,CloseOutlined:O,VerticalRightOutlined:C,VerticalLeftOutlined:P,ColumnWidthOutlined:w},Se=I({name:"TabsView",components:u({},Me),setup(){const e=K(),a=L(),t=Oe(),l=e=>{const{fullPath:a,hash:t,meta:l,name:n,params:o,path:s,query:u}=e;return{fullPath:a,hash:t,meta:l,name:n,params:o,path:s,query:u}};let n=[];try{const a=Ce.get(Pe);n=a?JSON.parse(a):[l(e)]}catch(p){n=[l(e)]}t.commit("tabsView/initTabs",n);const o=F({activeKey:e.fullPath}),s=()=>{var l,n;if(e.meta.keepAlive){const o=null==(n=null==(l=a.currentRoute.value.matched.find((a=>a.name==e.name)))?void 0:l.components)?void 0:n.default.name;o&&(t.state.asyncRoute.keepAliveComponents=t.state.asyncRoute.keepAliveComponents.filter((e=>e!=o)))}},c=T((()=>t.state.tabsView.tabsList));x((()=>e.fullPath),(()=>{const e=[];c.value.forEach((t=>{a.hasRoute(t.name)||e.push(t.name)})),e.length&&t.commit("tabsView/initTabs",c.value.filter((a=>!e.includes(a.name))))}));const d=["Redirect","login"];x((()=>e.fullPath),((a,n)=>{d.includes(e.name)||(o.activeKey=a,t.commit("tabsView/addTabs",l(e)))}),{immediate:!0}),window.addEventListener("beforeunload",(()=>{Ce.set(Pe,JSON.stringify(c.value))}));const r=e=>{if(1===c.value.length)return j.warning("这已经是最后一页，不能再关闭了！");if(s(),t.commit("tabsView/closeCurrentTab",e),o.activeKey===e.fullPath){const e=c.value[Math.max(0,c.value.length-1)];o.activeKey=e.fullPath,a.push(e)}},m=()=>{s(),a.push({path:"/redirect"+E(e).fullPath})};M("reloadPage",m);return i(u({},S(o)),{route:e,tabsList:c,changePage:e=>{o.activeKey=e,a.push(e)},editTabItem:(e,a)=>{"remove"==a&&r(c.value.find((a=>a.fullPath==e)))},removeTab:r,closeLeft:(e,l)=>{t.commit("tabsView/closeLeftTabs",e),o.activeKey=e.fullPath,a.replace(e.fullPath)},closeRight:(e,l)=>{t.commit("tabsView/closeRightTabs",e),o.activeKey=e.fullPath,a.replace(e.fullPath)},closeOther:e=>{t.commit("tabsView/closeOtherTabs",e),o.activeKey=e.fullPath,a.replace(e.fullPath)},closeAll:()=>{localStorage.removeItem("routes"),t.commit("tabsView/closeAllTabs"),a.replace("/")},reloadPage:m})}});c("data-v-597010d4");const je={class:"tabs-view"},Ee={style:{display:"inline-block"}},Ve=J(" 刷新 "),Ae=J(" 关闭 "),Re=J(" 关闭左侧 "),qe=J(" 关闭右侧 "),De=J(" 关闭其他 "),Ue=J(" 关闭全部 "),He=J(" 刷新 "),Be=J(" 关闭 "),$e=J(" 关闭其他 "),Ge=J(" 关闭全部 "),Je={class:"tabs-view-content"};d(),Se.render=function(e,a,t,l,n,o){const s=V("reload-outlined"),u=V("a-menu-item"),i=V("close-outlined"),c=V("a-menu-divider"),d=V("vertical-right-outlined"),p=V("vertical-left-outlined"),f=V("column-width-outlined"),y=V("minus-outlined"),h=V("a-menu"),b=V("a-dropdown"),g=V("a-tab-pane"),k=V("down-outlined"),_=V("a-tabs"),O=V("router-view"),C=V("a-card");return r(),m("div",je,[A(_,{activeKey:e.activeKey,"onUpdate:activeKey":a[3]||(a[3]=a=>e.activeKey=a),"hide-add":"",type:"editable-card",class:"tabs",onChange:e.changePage,onEdit:e.editTabItem},{tabBarExtraContent:R((()=>[A(b,{trigger:["click"]},{overlay:R((()=>[A(h,{style:{"user-select":"none"}},{default:R((()=>[A(u,{key:"1",disabled:e.activeKey!==e.route.fullPath,onClick:e.reloadPage},{default:R((()=>[A(s),He])),_:1},8,["disabled","onClick"]),A(u,{key:"2",onClick:a[1]||(a[1]=a=>e.removeTab(e.route))},{default:R((()=>[A(i),Be])),_:1}),A(c),A(u,{key:"5",onClick:a[2]||(a[2]=a=>e.closeOther(e.route))},{default:R((()=>[A(f),$e])),_:1}),A(u,{key:"6",onClick:e.closeAll},{default:R((()=>[A(y),Ge])),_:1},8,["onClick"])])),_:1})])),default:R((()=>[v("a",{class:"ant-dropdown-link",onClick:a[0]||(a[0]=q((()=>{}),["prevent"]))},[A(k,{style:{fontSize:"20px"}})])])),_:1})])),default:R((()=>[(r(!0),m(D,null,U(e.tabsList,((a,t)=>(r(),H(g,{key:a.fullPath},{tab:R((()=>[A(b,{trigger:["contextmenu"]},{overlay:R((()=>[A(h,{style:{"user-select":"none"}},{default:R((()=>[A(u,{key:"1",disabled:e.activeKey!==a.fullPath,onClick:e.reloadPage},{default:R((()=>[A(s),Ve])),_:2},1032,["disabled","onClick"]),A(u,{key:"2",onClick:t=>e.removeTab(a)},{default:R((()=>[A(i),Ae])),_:2},1032,["onClick"]),A(c),A(u,{key:"3",onClick:l=>e.closeLeft(a,t)},{default:R((()=>[A(d),Re])),_:2},1032,["onClick"]),A(u,{key:"4",onClick:l=>e.closeRight(a,t)},{default:R((()=>[A(p),qe])),_:2},1032,["onClick"]),A(c),A(u,{key:"5",onClick:t=>e.closeOther(a)},{default:R((()=>[A(f),De])),_:2},1032,["onClick"]),A(u,{key:"6",onClick:e.closeAll},{default:R((()=>[A(y),Ue])),_:1},8,["onClick"])])),_:2},1024)])),default:R((()=>{var e;return[v("div",Ee,B(null==(e=a.meta)?void 0:e.title),1)]})),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["activeKey","onChange","onEdit"]),v("div",Je,[A(C,null,{default:R((()=>[A(O,null,{default:R((({Component:e})=>[(r(),H(G,null,[(r(),H($(e)))],1024))])),_:1})])),_:1})])])},Se.__scopeId="data-v-597010d4";var Ne=I({name:"MenuItem",components:{IconFont:Ie,"a-sub-menu":N.SubMenu,"a-menu-item":N.Item},props:{menuInfo:{type:Object,default:()=>({})}}});Ne.render=function(e,a,t,l,n,o){var s;const u=V("icon-font"),i=V("a-menu-item"),c=V("menu-item",!0),d=V("a-sub-menu");return e.menuInfo.meta.hidden?z("",!0):(r(),m(D,{key:0},[(null==(s=e.menuInfo.children)?void 0:s.length)?(r(),H(d,W({key:0,key:e.menuInfo.name},e.$attrs),{title:R((()=>[v("span",null,[A(u,{type:e.menuInfo.meta.icon},null,8,["type"]),v("span",null,B(e.menuInfo.meta.title),1)])])),default:R((()=>[(r(!0),m(D,null,U(e.menuInfo.children,(e=>(r(),m(D,{key:e.name},[e.children?(r(),H(c,{key:e.name,"menu-info":e},null,8,["menu-info"])):(r(),H(i,{key:e.name},{default:R((()=>[A(u,{type:e.meta.icon},null,8,["type"]),v("span",null,B(e.meta.title),1)])),_:2},1024))],64)))),128))])),_:1},16)):(r(),H(i,{key:e.menuInfo.name},{default:R((()=>[A(u,{type:e.menuInfo.meta.icon},null,8,["type"]),v("span",null,B(e.menuInfo.meta.title),1)])),_:1}))],64))};var We=I({name:"Menu",components:{MenuItem:Ne,"a-sub-menu":N.SubMenu,"a-menu-item":N.Item,MenuFoldOutlined:Q,MenuUnfoldOutlined:Z,PieChartOutlined:X,MailOutlined:Y,DesktopOutlined:ee,InboxOutlined:ae,AppstoreOutlined:te},props:{collapsed:{type:Boolean}},setup(e){const a=K(),t=L(),l=Oe(),n=()=>{var e;return[null==(e=a.matched[1])?void 0:e.name]},o=F({openKeys:n(),selectedKeys:[a.name]}),s=T((()=>{var e;return null!=(e=l.getters["asyncRoute/menus"])?e:we.find((e=>"Layout"==e.name)).children}));x((()=>e.collapsed),(e=>{o.openKeys=e?[]:n(),o.selectedKeys=[a.name]})),x((()=>a.fullPath),(()=>{"login"==a.name||e.collapsed||(o.openKeys=n(),o.selectedKeys=[a.name])}));return i(u({},S(o)),{menus:s,clickMenuItem:({item:e,key:a,keyPath:l})=>{/http(s)?:/.test(a)?window.open(a):t.push({name:a})}})}});We.render=function(e,a,t,l,n,o){const s=V("menu-item"),u=V("a-menu");return r(),H(u,{"open-keys":e.openKeys,"onUpdate:open-keys":a[0]||(a[0]=a=>e.openKeys=a),"selected-keys":e.selectedKeys,"onUpdate:selected-keys":a[1]||(a[1]=a=>e.selectedKeys=a),mode:"inline",theme:"dark","inline-collapsed":e.collapsed,onClick:e.clickMenuItem},{default:R((()=>[(r(!0),m(D,null,U(e.menus,(e=>(r(),H(s,{key:e.name,"menu-info":e},null,8,["menu-info"])))),128))])),_:1},8,["open-keys","selected-keys","inline-collapsed","onClick"])};var ze={[le.Header.name]:le.Header,[ne.name]:ne,[N.name]:N,[oe.name]:oe,[N.Divider.name]:N.Divider,SettingOutlined:se,Dropdown:h,LockOutlined:ue,GithubOutlined:ie,SearchOutlined:ce,[de.name]:de,[de.Item.name]:de.Item,MenuFoldOutlined:Q,MenuUnfoldOutlined:Z,FullscreenOutlined:re,FullscreenExitOutlined:me,PoweroffOutlined:pe},Qe=I({name:"PageHeader",components:u({},ze),props:{collapsed:{type:Boolean}},emits:["update:collapsed"],setup(){var e;const a=Oe(),t=F({username:null==(e=a.getters["user/userInfo"])?void 0:e.username,fullscreenIcon:"FullscreenOutlined"}),l=L(),n=K();document.addEventListener("fullscreenchange",(()=>t.fullscreenIcon=null!==document.fullscreenElement?"FullscreenExitOutlined":"FullscreenOutlined"));const o=[{icon:"SearchOutlined",tips:"搜索"},{icon:"GithubOutlined",tips:"github",eventObject:{click:()=>window.open("https://github.com/buqiyuan/vue3-antd-admin")}},{icon:"SettingOutlined",tips:"网站设置"},{icon:"LockOutlined",tips:"锁屏",eventObject:{click:()=>a.commit("lockscreen/setLock",!0)}}];return i(u({},S(t)),{iconList:o,toggleFullScreen:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},doLogout:()=>{fe.confirm({title:"您确定要退出登录吗？",icon:A(ve),onOk:()=>{a.dispatch("user/logout").then((e=>{j.success("成功退出登录"),localStorage.removeItem(Pe),l.replace({name:"login",query:{redirect:n.fullPath}}).finally((()=>location.reload()))}))}})}})}});c("data-v-028ad88a");const Ze={class:"left-options"},Xe=["onClick"],Ye={class:"right-options"},ea=v("div",null,"个人中心",-1),aa=J(" 退出登录");d(),Qe.render=function(e,a,t,l,n,o){const s=V("router-link"),u=V("a-menu-item"),i=V("a-menu"),c=V("a-breadcrumb-item"),d=V("a-breadcrumb"),p=V("a-tooltip"),f=V("a-avatar"),y=V("a-menu-divider"),h=V("poweroff-outlined"),b=V("Dropdown"),g=V("ALayoutHeader");return r(),H(g,{class:"layout-header"},{default:R((()=>[v("div",Ze,[v("span",{class:"menu-fold",onClick:a[0]||(a[0]=()=>e.$emit("update:collapsed",!e.collapsed))},[(r(),H($(e.collapsed?"menu-unfold-outlined":"menu-fold-outlined")))]),A(d,null,{default:R((()=>[(r(!0),m(D,null,U(e.$route.matched,((a,t)=>(r(),H(c,{key:a.name},ye({default:R((()=>[v("span",null,B(a.meta.title),1)])),_:2},[a.children.length?{name:"overlay",fn:R((()=>{var l;return[A(i,{selectedKeys:[null==(l=e.$route.matched[t+1])?void 0:l.name]},{default:R((()=>[(r(!0),m(D,null,U(a.children,(e=>{var a;return r(),m(D,null,[(null==(a=e.meta)?void 0:a.hidden)?z("",!0):(r(),H(u,{key:e.name},{default:R((()=>[A(s,{to:{name:e.name},custom:""},{default:R((({navigate:a})=>{var t;return[v("div",{onClick:a},B(null==(t=e.meta)?void 0:t.title),9,Xe)]})),_:2},1032,["to"])])),_:2},1024))],64)})),256))])),_:2},1032,["selectedKeys"])]}))}:void 0]),1024)))),128))])),_:1})]),v("div",Ye,[(r(!0),m(D,null,U(e.iconList,(e=>(r(),H(p,{key:e.icon.name,placement:"bottom"},{title:R((()=>[v("span",null,B(e.tips),1)])),default:R((()=>[(r(),H($(e.icon),he(e.eventObject||{}),null,16))])),_:2},1024)))),128)),(r(),H($(e.fullscreenIcon),{onClick:e.toggleFullScreen},null,8,["onClick"])),A(b,null,{overlay:R((()=>[A(i,null,{default:R((()=>[A(u,null,{default:R((()=>[ea])),_:1}),A(y),A(u,null,{default:R((()=>[v("div",{onClick:a[1]||(a[1]=q(((...a)=>e.doLogout&&e.doLogout(...a)),["prevent"]))},[A(h),aa])])),_:1})])),_:1})])),default:R((()=>[A(f,null,{default:R((()=>[J(B(e.username),1)])),_:1})])),_:1})])])),_:1})},Qe.__scopeId="data-v-028ad88a";var ta="_page_footer_18xo3_1",la="_page_footer_link_18xo3_7",na="_copyright_18xo3_15";const{Footer:oa}=le;var sa=I({name:"PageFooter",components:{ALayoutFooter:oa},setup:()=>()=>A(D,null,[A(V("a-layout-footer"),{class:ta},{default:()=>[A("div",{class:la},[A("a",{href:"https://github.com/vuejs/vue-next",target:"_blank"},[J("vue 3.0")]),A("a",{href:"https://github.com/buqiyuan",target:"_blank"},[A(ie,null,null)]),A("a",{href:"https://github.com/vueComponent/ant-design-vue",target:"_blank"},[" ",J("ant-design-vue 2.0")])]),A("div",{class:na},[J("Copyright "),A(be,null,null),J(" 2020")," ",A("a",{href:"https://buqiyuan.gitee.io",target:"_blank"},[J("buqiyuan.gitee.io")])])]})])}),ua=I({name:"Layout",components:{TabsView:Se,PageHeader:Qe,AsideMenu:We,Logo:xe,PageFooter:sa,[le.name]:le,[le.Content.name]:le.Content,[le.Sider.name]:le.Sider},setup(){const e=ge(!1),a=T((()=>e.value?"80px":"208px"));return{collapsed:e,testMsg:()=>{j.success(ke("span","啥子"),2)},asiderWidth:a}}});ua.render=function(e,a,t,l,n,o){const s=V("logo"),u=V("aside-menu"),i=V("a-layout-sider"),c=V("page-header"),d=V("tabs-view"),m=V("a-layout-content"),p=V("page-footer"),f=V("a-layout");return r(),H(f,{class:"layout"},{default:R((()=>[A(i,{collapsed:e.collapsed,"onUpdate:collapsed":a[0]||(a[0]=a=>e.collapsed=a),trigger:null,collapsible:"",class:"layout-sider"},{default:R((()=>[A(s,{collapsed:e.collapsed},null,8,["collapsed"]),A(u,{collapsed:e.collapsed},null,8,["collapsed"])])),_:1},8,["collapsed"]),A(f,null,{default:R((()=>[A(c,{collapsed:e.collapsed,"onUpdate:collapsed":a[1]||(a[1]=a=>e.collapsed=a)},null,8,["collapsed"]),A(m,{class:"layout-content"},{default:R((()=>[A(d)])),_:1}),A(p)])),_:1})])),_:1})},ua.__scopeId="data-v-b669fcbe";export{ua as default};
