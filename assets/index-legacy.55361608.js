!function(){var e=document.createElement("style");e.innerHTML='@keyframes antCheckboxEffect{0%{transform:scale(1);opacity:.5}to{transform:scale(1.6);opacity:0}}.ant-tree.ant-tree-directory{position:relative}.ant-tree.ant-tree-directory>li span.ant-tree-switcher,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-switcher{position:relative;z-index:1}.ant-tree.ant-tree-directory>li span.ant-tree-switcher.ant-tree-switcher-noop,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-switcher.ant-tree-switcher-noop{pointer-events:none}.ant-tree.ant-tree-directory>li span.ant-tree-checkbox,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-checkbox{position:relative;z-index:1}.ant-tree.ant-tree-directory>li span.ant-tree-node-content-wrapper,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-node-content-wrapper{border-radius:0;user-select:none}.ant-tree.ant-tree-directory>li span.ant-tree-node-content-wrapper:hover,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-node-content-wrapper:hover{background:transparent}.ant-tree.ant-tree-directory>li span.ant-tree-node-content-wrapper:hover:before,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-node-content-wrapper:hover:before{background:#f5f5f5}.ant-tree.ant-tree-directory>li span.ant-tree-node-content-wrapper.ant-tree-node-selected,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-node-content-wrapper.ant-tree-node-selected{color:#fff;background:transparent}.ant-tree.ant-tree-directory>li span.ant-tree-node-content-wrapper:before,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-node-content-wrapper:before{position:absolute;right:0;left:0;height:24px;transition:all .3s;content:""}.ant-tree.ant-tree-directory>li span.ant-tree-node-content-wrapper>span,.ant-tree.ant-tree-directory .ant-tree-child-tree>li span.ant-tree-node-content-wrapper>span{position:relative;z-index:1}.ant-tree.ant-tree-directory>li.ant-tree-treenode-selected>span.ant-tree-switcher,.ant-tree.ant-tree-directory .ant-tree-child-tree>li.ant-tree-treenode-selected>span.ant-tree-switcher{color:#fff}.ant-tree.ant-tree-directory>li.ant-tree-treenode-selected>span.ant-tree-checkbox .ant-tree-checkbox-inner,.ant-tree.ant-tree-directory .ant-tree-child-tree>li.ant-tree-treenode-selected>span.ant-tree-checkbox .ant-tree-checkbox-inner{border-color:#1890ff}.ant-tree.ant-tree-directory>li.ant-tree-treenode-selected>span.ant-tree-checkbox.ant-tree-checkbox-checked:after,.ant-tree.ant-tree-directory .ant-tree-child-tree>li.ant-tree-treenode-selected>span.ant-tree-checkbox.ant-tree-checkbox-checked:after{border-color:#fff}.ant-tree.ant-tree-directory>li.ant-tree-treenode-selected>span.ant-tree-checkbox.ant-tree-checkbox-checked .ant-tree-checkbox-inner,.ant-tree.ant-tree-directory .ant-tree-child-tree>li.ant-tree-treenode-selected>span.ant-tree-checkbox.ant-tree-checkbox-checked .ant-tree-checkbox-inner{background:#fff}.ant-tree.ant-tree-directory>li.ant-tree-treenode-selected>span.ant-tree-checkbox.ant-tree-checkbox-checked .ant-tree-checkbox-inner:after,.ant-tree.ant-tree-directory .ant-tree-child-tree>li.ant-tree-treenode-selected>span.ant-tree-checkbox.ant-tree-checkbox-checked .ant-tree-checkbox-inner:after{border-color:#1890ff}.ant-tree.ant-tree-directory>li.ant-tree-treenode-selected>span.ant-tree-node-content-wrapper:before,.ant-tree.ant-tree-directory .ant-tree-child-tree>li.ant-tree-treenode-selected>span.ant-tree-node-content-wrapper:before{background:#1890ff}.ant-tree-checkbox{box-sizing:border-box;margin:0;padding:0;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";position:relative;top:-.09em;display:inline-block;line-height:1;white-space:nowrap;vertical-align:middle;outline:none;cursor:pointer}.ant-tree-checkbox-wrapper:hover .ant-tree-checkbox-inner,.ant-tree-checkbox:hover .ant-tree-checkbox-inner,.ant-tree-checkbox-input:focus+.ant-tree-checkbox-inner{border-color:#1890ff}.ant-tree-checkbox-checked:after{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid #1890ff;border-radius:2px;visibility:hidden;animation:antCheckboxEffect .36s ease-in-out;animation-fill-mode:backwards;content:""}.ant-tree-checkbox:hover:after,.ant-tree-checkbox-wrapper:hover .ant-tree-checkbox:after{visibility:visible}.ant-tree-checkbox-inner{position:relative;top:0;left:0;display:block;width:16px;height:16px;background-color:#fff;border:1px solid #d9d9d9;border-radius:2px;border-collapse:separate;transition:all .3s}.ant-tree-checkbox-inner:after{position:absolute;top:50%;left:22%;display:table;width:5.71428571px;height:9.14285714px;border:2px solid #fff;border-top:0;border-left:0;transform:rotate(45deg) scale(0) translate(-50%,-50%);opacity:0;transition:all .1s cubic-bezier(.71,-.46,.88,.6),opacity .1s;content:" "}.ant-tree-checkbox-input{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;width:100%;height:100%;cursor:pointer;opacity:0}.ant-tree-checkbox-checked .ant-tree-checkbox-inner:after{position:absolute;display:table;border:2px solid #fff;border-top:0;border-left:0;transform:rotate(45deg) scale(1) translate(-50%,-50%);opacity:1;transition:all .2s cubic-bezier(.12,.4,.29,1.46) .1s;content:" "}.ant-tree-checkbox-checked .ant-tree-checkbox-inner{background-color:#1890ff;border-color:#1890ff}.ant-tree-checkbox-disabled{cursor:not-allowed}.ant-tree-checkbox-disabled.ant-tree-checkbox-checked .ant-tree-checkbox-inner:after{border-color:#00000040;animation-name:none}.ant-tree-checkbox-disabled .ant-tree-checkbox-input{cursor:not-allowed}.ant-tree-checkbox-disabled .ant-tree-checkbox-inner{background-color:#f5f5f5;border-color:#d9d9d9!important}.ant-tree-checkbox-disabled .ant-tree-checkbox-inner:after{border-color:#f5f5f5;border-collapse:separate;animation-name:none}.ant-tree-checkbox-disabled+span{color:#00000040;cursor:not-allowed}.ant-tree-checkbox-disabled:hover:after,.ant-tree-checkbox-wrapper:hover .ant-tree-checkbox-disabled:after{visibility:hidden}.ant-tree-checkbox-wrapper{box-sizing:border-box;margin:0;padding:0;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";display:inline-block;line-height:unset;cursor:pointer}.ant-tree-checkbox-wrapper.ant-tree-checkbox-wrapper-disabled{cursor:not-allowed}.ant-tree-checkbox-wrapper+.ant-tree-checkbox-wrapper{margin-left:8px}.ant-tree-checkbox+span{padding-right:8px;padding-left:8px}.ant-tree-checkbox-group{box-sizing:border-box;margin:0;padding:0;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";display:inline-block}.ant-tree-checkbox-group-item{display:inline-block;margin-right:8px}.ant-tree-checkbox-group-item:last-child{margin-right:0}.ant-tree-checkbox-group-item+.ant-tree-checkbox-group-item{margin-left:0}.ant-tree-checkbox-indeterminate .ant-tree-checkbox-inner{background-color:#fff;border-color:#d9d9d9}.ant-tree-checkbox-indeterminate .ant-tree-checkbox-inner:after{top:50%;left:50%;width:8px;height:8px;background-color:#1890ff;border:0;transform:translate(-50%,-50%) scale(1);opacity:1;content:" "}.ant-tree-checkbox-indeterminate.ant-tree-checkbox-disabled .ant-tree-checkbox-inner:after{background-color:#00000040;border-color:#00000040}.ant-tree{box-sizing:border-box;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";margin:0;padding:0}.ant-tree-checkbox-checked:after{position:absolute;top:16.67%;left:0;width:100%;height:66.67%}.ant-tree ol,.ant-tree ul{margin:0;padding:0;list-style:none}.ant-tree li{margin:0;padding:4px 0;white-space:nowrap;list-style:none;outline:0}.ant-tree li span[draggable],.ant-tree li span[draggable=true]{line-height:20px;border-top:2px transparent solid;border-bottom:2px transparent solid;user-select:none;-khtml-user-drag:element;-webkit-user-drag:element}.ant-tree li.drag-over>span[draggable]{color:#fff;background-color:#1890ff;opacity:.8}.ant-tree li.drag-over-gap-top>span[draggable]{border-top-color:#1890ff}.ant-tree li.drag-over-gap-bottom>span[draggable]{border-bottom-color:#1890ff}.ant-tree li.filter-node>span{color:#ff4d4f!important;font-weight:500!important}.ant-tree li.ant-tree-treenode-loading span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-loading-icon,.ant-tree li.ant-tree-treenode-loading span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-loading-icon{position:absolute;left:0;display:inline-block;width:24px;height:24px;color:#1890ff;font-size:14px;transform:none}.ant-tree li.ant-tree-treenode-loading span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-loading-icon svg,.ant-tree li.ant-tree-treenode-loading span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-loading-icon svg{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto}:root .ant-tree li.ant-tree-treenode-loading span.ant-tree-switcher.ant-tree-switcher_open:after,:root .ant-tree li.ant-tree-treenode-loading span.ant-tree-switcher.ant-tree-switcher_close:after{opacity:0}.ant-tree li ul{margin:0;padding:0 0 0 18px}.ant-tree li .ant-tree-node-content-wrapper{display:inline-block;height:24px;margin:0;padding:0 5px;color:#000000d9;line-height:24px;text-decoration:none;vertical-align:top;border-radius:2px;cursor:pointer;transition:all .3s}.ant-tree li .ant-tree-node-content-wrapper:hover{background-color:#f5f5f5}.ant-tree li .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#bae7ff}.ant-tree li span.ant-tree-checkbox{top:initial;height:24px;margin:0 4px 0 2px;padding:4px 0}.ant-tree li span.ant-tree-switcher,.ant-tree li span.ant-tree-iconEle{display:inline-block;width:24px;height:24px;margin:0;line-height:24px;text-align:center;vertical-align:top;border:0 none;outline:none;cursor:pointer}.ant-tree li span.ant-tree-iconEle:empty{display:none}.ant-tree li span.ant-tree-switcher{position:relative}.ant-tree li span.ant-tree-switcher.ant-tree-switcher-noop{cursor:default}.ant-tree li span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-icon,.ant-tree li span.ant-tree-switcher.ant-tree-switcher_open .ant-select-switcher-icon{font-size:12px;font-size:10px \\\t;transform:scale(.83333333) rotate(0);display:inline-block;font-weight:bold}:root .ant-tree li span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-icon,:root .ant-tree li span.ant-tree-switcher.ant-tree-switcher_open .ant-select-switcher-icon{font-size:12px}.ant-tree li span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-icon svg,.ant-tree li span.ant-tree-switcher.ant-tree-switcher_open .ant-select-switcher-icon svg{transition:transform .3s}.ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-icon,.ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-select-switcher-icon{font-size:12px;font-size:10px \\\t;transform:scale(.83333333) rotate(0);display:inline-block;font-weight:bold}:root .ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-icon,:root .ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-select-switcher-icon{font-size:12px}.ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-icon svg,.ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-select-switcher-icon svg{transition:transform .3s}.ant-tree li span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-icon svg{transform:rotate(-90deg)}.ant-tree li:last-child>span.ant-tree-switcher:before,.ant-tree li:last-child>span.ant-tree-iconEle:before{display:none}.ant-tree>li:first-child{padding-top:7px}.ant-tree>li:last-child{padding-bottom:7px}.ant-tree-child-tree>li:first-child{padding-top:8px}.ant-tree-child-tree>li:last-child{padding-bottom:0}li.ant-tree-treenode-disabled>span:not(.ant-tree-switcher),li.ant-tree-treenode-disabled>.ant-tree-node-content-wrapper,li.ant-tree-treenode-disabled>.ant-tree-node-content-wrapper span{color:#00000040;cursor:not-allowed}li.ant-tree-treenode-disabled>.ant-tree-node-content-wrapper:hover{background:transparent}.ant-tree-icon__open{margin-right:2px;vertical-align:top}.ant-tree-icon__close{margin-right:2px;vertical-align:top}.ant-tree.ant-tree-show-line li{position:relative}.ant-tree.ant-tree-show-line li span.ant-tree-switcher{color:#00000073;background:#fff}.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher-noop .ant-tree-switcher-icon,.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher-noop .ant-select-switcher-icon{display:inline-block;font-weight:normal;font-size:12px}.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher-noop .ant-tree-switcher-icon svg,.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher-noop .ant-select-switcher-icon svg{transition:transform .3s}.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-icon,.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_open .ant-select-switcher-icon{display:inline-block;font-weight:normal;font-size:12px}.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_open .ant-tree-switcher-icon svg,.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_open .ant-select-switcher-icon svg{transition:transform .3s}.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-icon,.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_close .ant-select-switcher-icon{display:inline-block;font-weight:normal;font-size:12px}.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_close .ant-tree-switcher-icon svg,.ant-tree.ant-tree-show-line li span.ant-tree-switcher.ant-tree-switcher_close .ant-select-switcher-icon svg{transition:transform .3s}.ant-tree.ant-tree-show-line li:not(:last-child):before{position:absolute;left:12px;width:1px;height:100%;height:calc(100% - 22px);margin:22px 0 0;border-left:1px solid #d9d9d9;content:" "}.ant-tree.ant-tree-icon-hide .ant-tree-treenode-loading .ant-tree-iconEle{display:none}.ant-tree.ant-tree-block-node li .ant-tree-node-content-wrapper{width:calc(100% - 24px)}.ant-tree.ant-tree-block-node li span.ant-tree-checkbox+.ant-tree-node-content-wrapper{width:calc(100% - 46px)}@media print{body>div:not(#printContainer){display:none}body>#printContainer table{width:100%;table-layout:auto}body>#printContainer tr th:not(:nth-of-type(n + 2):nth-last-of-type(n + 2)){display:none!important;width:0!important}body>#printContainer tr td:not(:nth-of-type(n + 2):nth-last-of-type(n + 2)){display:none!important;width:0!important}body>#printContainer colgroup col:not(:nth-of-type(n + 2):nth-last-of-type(n + 2)){display:none!important;width:0!important}}\n',document.head.appendChild(e),System.register(["./vendor-legacy.e71c8e14.js","./index-legacy.b24d49a4.js","./index-legacy.7a45e14c.js","./index-legacy.b2e53b1b.js"],(function(e){"use strict";var t,n,r,a,o,i,c,s,l,d,p,h,b,f,w,g,x,u,k,m,y,v,_,z,C,I;return{setters:[function(e){t=e.d,n=e.bj,r=e.ag,a=e.s,o=e.u,i=e.f,c=e.q,s=e.E,l=e.e,d=e.c,p=e.w,h=e.G,b=e.r,f=e.M,w=e.aU,g=e.b8,x=e.l,u=e.b},function(e){k=e._},function(e){m=e.a,y=e.d,v=e.p,_=e.g,z=e.b},function(e){C=e.j,I=e.l}],execute:function(){var R=t({name:"AccessTree",components:{[n.name]:n,[r.name]:r},props:{value:{type:Array,default:()=>[]}},emits:["update:value"],setup(e,{emit:t}){const n=a({treeData:[],spinning:!1,replaceFields:{key:"id"}}),r=(e,t=-1)=>e.filter((e=>e.moduleId==t)).map((t=>({...t,title:t.moduleName||t.actionName,children:r(e,t.id)}))),s=o({get:()=>e.value,set:e=>t("update:value",Array.isArray(e)?e:e.checked)});i((async()=>{n.spinning=!0;const e=await m().finally((()=>n.spinning=!1));n.treeData=r(e)}));const l=(e,t=[])=>e.eventKey?(t.push(e.eventKey),l(e.vcTreeNode,t)):t,d=(e,t=[])=>e?.children.length>0?e.children.reduce(((e,t)=>(t.children.length>0&&e.push(...d(t,e),[]),e.concat([t.id]))),t):t;return{...c(n),checkedKeys:s,onCheck:(e,{node:t,checked:n})=>{let r=s.value;if(n)r=[...new Set([...s.value,...e.checked,...l(t.vcTreeNode),...d(t.dataRef)])];else{const n=d(t.dataRef);r=n.length>0?e.checked.filter((e=>!n.includes(e))):e.checked;(t.vcTreeNode?.dataRef?.children?.map((e=>e.id))||[]).some((e=>r.includes(e)))||(r=r.filter((e=>e!=t.vcTreeNode?.eventKey)))}s.value=r}}}});R.render=function(e,t,n,r,a,o){const i=s("a-tree"),c=s("a-spin");return l(),d(c,{spinning:e.spinning},{default:p((()=>[h(i,{checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":t[0]||(t[0]=t=>e.checkedKeys=t),style:{"min-height":"40px"},checkable:"",checkStrictly:"",selectable:!1,"tree-data":e.treeData,"replace-fields":e.replaceFields,onCheck:e.onCheck},null,8,["checkedKeys","tree-data","replace-fields","onCheck"])])),_:1},8,["spinning"])};const S=()=>({style:{width:"auto"},formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},formItem:[{type:"input",label:"角色名称",field:"title",value:"",props:{placeholder:"请输入角色名称"},rules:[{required:!0,message:"角色名称不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"角色描述"}},{type:h(R),label:"资源",field:"accessIdsList",value:[],asyncValue:async(e,t)=>{const{id:n}=t?.props.fields;return(await m(n)).map((e=>e.accessId))}}]}),K=[{title:"角色名称",dataIndex:"title"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"createdAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>C(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>C(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await y(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:e},t)=>I({title:"编辑角色",fields:e,formSchema:S(),handleOk:async(n,r)=>{const{description:a,title:o,accessIdsList:i}=n,c={description:a,title:o,accessIdsList:i.toString()};return await v(e.id,c).then((()=>t()))}})}]}];var T=e("default",t({name:"SystemRole",components:{DynamicTable:k},setup(){const e=b(),t=a({tableLoading:!1,rowSelection:{onChange:(e,n)=>{t.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),n=o((()=>0==t.rowSelection.selectedRowKeys.length));return{...c(t),columns:K,tableRef:e,isDisabled:n,getAdminRole:_,printTable:()=>{const t=e.value?.$el.querySelector(".ant-table-content").cloneNode(!0);t.setAttribute("id","printContainer"),document.body.append(t);const n=()=>{t.remove(),window.removeEventListener("afterprint",n)};window.addEventListener("afterprint",n),document.execCommand("print")},addItem:()=>{I({title:"添加角色",formSchema:S(),handleOk:async(t,n)=>{const{description:r,title:a,accessIdsList:o}=t,i={description:r,title:a,accessIdsList:o.toString()};await z(i),e.value?.refreshTableData()}})},deleteItems:()=>{f.confirm({title:"提示",icon:h(w),content:"您确定要删除所有选中吗？",onOk:async()=>{await y(t.rowSelection.selectedRowKeys.toString()),e.value?.refreshTableData(),t.rowSelection.selectedRowKeys=[]}})}}}}));const A=u(" 添加 "),E=u(" 打印表格 "),L=u(" 删除 ");T.render=function(e,t,n,r,a,o){const i=s("a-button"),c=s("dynamic-table"),b=g("permission");return l(),d(c,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminRole,rowKey:"id","row-selection":e.rowSelection},{title:p((()=>[x(h(i,{type:"primary",onClick:e.addItem},{default:p((()=>[A])),_:1},8,["onClick"]),[[b,{action:"create",effect:"disabled"}]]),h(i,{type:"primary",onClick:e.printTable},{default:p((()=>[E])),_:1},8,["onClick"]),x(h(i,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:p((()=>[L])),_:1},8,["disabled","onClick"]),[[b,{action:"delete"}]])])),_:1},8,["columns","get-list-func","row-selection"])}}}}))}();
