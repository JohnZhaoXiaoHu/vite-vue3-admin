!function(){var t=document.createElement("style");t.innerHTML='.ant-popover{box-sizing:border-box;margin:0;padding:0;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";position:absolute;top:0;left:0;z-index:1030;font-weight:normal;white-space:normal;text-align:left;cursor:auto;user-select:text}.ant-popover:after{position:absolute;background:rgba(255,255,255,.01);content:""}.ant-popover-hidden{display:none}.ant-popover-placement-top,.ant-popover-placement-topLeft,.ant-popover-placement-topRight{padding-bottom:10px}.ant-popover-placement-right,.ant-popover-placement-rightTop,.ant-popover-placement-rightBottom{padding-left:10px}.ant-popover-placement-bottom,.ant-popover-placement-bottomLeft,.ant-popover-placement-bottomRight{padding-top:10px}.ant-popover-placement-left,.ant-popover-placement-leftTop,.ant-popover-placement-leftBottom{padding-right:10px}.ant-popover-inner{background-color:#fff;background-clip:padding-box;border-radius:2px;box-shadow:0 2px 8px #00000026;box-shadow:0 0 8px #00000026 \\\t}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none){.ant-popover-inner{box-shadow:0 2px 8px #00000026}}.ant-popover-title{min-width:177px;min-height:32px;margin:0;padding:5px 16px 4px;color:#000000d9;font-weight:500;border-bottom:1px solid #f0f0f0}.ant-popover-inner-content{padding:12px 16px;color:#000000d9}.ant-popover-message{position:relative;padding:4px 0 12px;color:#000000d9;font-size:14px}.ant-popover-message>.anticon{position:absolute;top:8px;color:#faad14;font-size:14px}.ant-popover-message-title{padding-left:22px}.ant-popover-buttons{margin-bottom:4px;text-align:right}.ant-popover-buttons button{margin-left:8px}.ant-popover-arrow{position:absolute;display:block;width:8.48528137px;height:8.48528137px;background:transparent;border-style:solid;border-width:4.24264069px;transform:rotate(45deg)}.ant-popover-placement-top>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-topLeft>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-topRight>.ant-popover-content>.ant-popover-arrow{bottom:6.2px;border-top-color:transparent;border-right-color:#fff;border-bottom-color:#fff;border-left-color:transparent;box-shadow:3px 3px 7px #00000012}.ant-popover-placement-top>.ant-popover-content>.ant-popover-arrow{left:50%;transform:translate(-50%) rotate(45deg)}.ant-popover-placement-topLeft>.ant-popover-content>.ant-popover-arrow{left:16px}.ant-popover-placement-topRight>.ant-popover-content>.ant-popover-arrow{right:16px}.ant-popover-placement-right>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-rightTop>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-rightBottom>.ant-popover-content>.ant-popover-arrow{left:6px;border-top-color:transparent;border-right-color:transparent;border-bottom-color:#fff;border-left-color:#fff;box-shadow:-3px 3px 7px #00000012}.ant-popover-placement-right>.ant-popover-content>.ant-popover-arrow{top:50%;transform:translateY(-50%) rotate(45deg)}.ant-popover-placement-rightTop>.ant-popover-content>.ant-popover-arrow{top:12px}.ant-popover-placement-rightBottom>.ant-popover-content>.ant-popover-arrow{bottom:12px}.ant-popover-placement-bottom>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-bottomLeft>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-bottomRight>.ant-popover-content>.ant-popover-arrow{top:6px;border-top-color:#fff;border-right-color:transparent;border-bottom-color:transparent;border-left-color:#fff;box-shadow:-2px -2px 5px #0000000f}.ant-popover-placement-bottom>.ant-popover-content>.ant-popover-arrow{left:50%;transform:translate(-50%) rotate(45deg)}.ant-popover-placement-bottomLeft>.ant-popover-content>.ant-popover-arrow{left:16px}.ant-popover-placement-bottomRight>.ant-popover-content>.ant-popover-arrow{right:16px}.ant-popover-placement-left>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-leftTop>.ant-popover-content>.ant-popover-arrow,.ant-popover-placement-leftBottom>.ant-popover-content>.ant-popover-arrow{right:6px;border-top-color:#fff;border-right-color:#fff;border-bottom-color:transparent;border-left-color:transparent;box-shadow:3px -3px 7px #00000012}.ant-popover-placement-left>.ant-popover-content>.ant-popover-arrow{top:50%;transform:translateY(-50%) rotate(45deg)}.ant-popover-placement-leftTop>.ant-popover-content>.ant-popover-arrow{top:12px}.ant-popover-placement-leftBottom>.ant-popover-content>.ant-popover-arrow{bottom:12px}[data-v-fedbcd46] .ant-table .ant-table-title{display:flex}[data-v-fedbcd46] .ant-table .ant-table-title .ant-btn{margin-right:10px}.actions>*[data-v-fedbcd46]{margin-right:10px}.table-page-search-submitButtons[data-v-4bfdf15e]{display:block;margin-bottom:24px;white-space:nowrap}[data-v-4bfdf15e] .ant-row{width:100%}[data-v-4bfdf15e] .ant-form-item{margin-right:0}.collapse-icon[data-v-4bfdf15e]{transform:rotate(var(--7cb6967a));transition:transform .3s}\n',document.head.appendChild(t),System.register(["./vendor-legacy.e71c8e14.js","./index-legacy.b2e53b1b.js"],(function(t){"use strict";var e,o,a,n,r,p,l,s,c,i,d,u,m,f,b,v,g,h,x,w,y,S,k,O,C,R,T,z,j,D,E,_,L,B,F,$,I;return{setters:[function(t){e=t.r,o=t.b4,a=t.d,n=t.an,r=t.ap,p=t.ad,l=t.b7,s=t.s,c=t.aB,i=t.q,d=t.p,u=t.h,m=t.E,f=t.b8,b=t.e,v=t.c,g=t.am,h=t.k,x=t.w,w=t.a,y=t.b9,S=t.ba,k=t.a8,O=t.i,C=t.F,R=t.H,T=t.a0,z=t.b,j=t.t,D=t.l,E=t.G,_=t.av,L=t.u,B=t.bb,F=t.j,$=t.n},function(t){I=t.g}],execute:function(){const N=t=>{let e,o,a,n;const r=()=>n.onmouseup=n.onmousedown=n.onmousemove=null;t.forEach((p=>{const l=p?.customHeaderCell?.(t)??{};p.customHeaderCell=t=>({...l,onmouseenter:()=>{n=t.title[0].el.closest("th"),a??(a=n.closest(".ant-table-wrapper")),o??(o=a.clientWidth),n.onmousemove=function(t){t.offsetX>this.offsetWidth-10?this.style.cursor="col-resize":this.style.cursor="default",null==e&&(e=this),null!=e.mouseDown&&1==e.mouseDown&&(e.style.cursor="default",e.oldWidth+(t.x-e.oldX)>0&&(e.width=e.oldWidth+(t.x-e.oldX)),e.style.width=e.width,a.style.width=o+(t.x-e.oldX)+"px",e.style.cursor="col-resize")},n.onmousedown=function(t){e=this,t.offsetX>e.offsetWidth-10&&(e.mouseDown=!0,e.oldX=t.x,e.oldWidth=e.offsetWidth)},n.onmouseup=r,a.onmouseup=function(){r(),null==e&&(e=this),e.mouseDown=!1,e.style.cursor="default",o=a.clientWidth}},onmouseup:()=>r})}))};var M=t("_",a({name:"DynamicTable",components:{Table:n,[r.name]:r,[p.name]:p,[l.name]:l,Option:p.Option},inheritAttrs:!1,props:{dataSource:{type:Array},columns:{type:Object,required:!0},getListFunc:{type:Function},rowSelection:{type:Object},rowKey:{type:[String,Function]},pageOption:{type:Object,default:()=>({})},showSummary:{type:Boolean,default:!1},sumText:{type:String,default:"合计"},summaryFunc:{type:Function},dragColEnable:{type:Boolean,default:!0},dragRowEnable:Boolean},emits:["change","update:pageOption"],setup(t,{emit:a,slots:n}){const r=e(),{pageOptions:p}=function(t){const o=e({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,showSizeChanger:!0,showTotal:t=>`共 ${t} 条`,onChange:(e,o)=>t?.pageChange?.(e,o),onShowSizeChange:(e,o)=>t?.pageChange?.(e,o),...t});return{pageOptions:o,updatePageOption:(t={})=>{Object.assign(o.value,t)}}}(),{setCalculateRow:l}=(()=>{let t;return{setCalculateRow:async e=>{await o();const{tableRef:a,dataSource:n=[],columns:r=[],sumText:p,summaryFunc:l}=e;if(!n.length)return;const s=a.value.$el.querySelector(".ant-table-tbody");t||(t=s.lastElementChild?.cloneNode(!0),t.style.backgroundColor="#f8f8f9",t.style.position="sticky",t.style.zIndex="999",t.style.bottom="0",t.setAttribute("data-row-key",String(Math.random())));const c=e=>{if(I(l)){const e=l({dataSource:n,columns:r});[...t.children].forEach(((t,o)=>{t.textContent=e[o],t.style.backgroundColor="inherit"}))}else{const e=Object.keys(n[0]).reduce(((t,e)=>{const o=n.map((t=>t[e])).reduce(((t,e)=>e+t),0);return t[e]=isNaN(Number(o))?"N/A":o,t}),{}),o=r.map((t=>t.dataIndex??t.key));[...t.children].forEach(((t,a)=>{t.textContent=0==a?p:e[o[a]],t.style.backgroundColor="inherit"}))}e?.length&&[...t.children].forEach(((t,o)=>{Object.keys(e[o].style||[]).forEach((a=>{const n=e[o].style[a];t.style[n]=e[o].style[n],t.className=e[o].className}))}))};c(),s.contains(t)||(s.appendChild(t),setTimeout((()=>{const t=a.value.$el.querySelector(".ant-table-tbody")?.firstElementChild?.children;t&&c([...t])}),500))}}})();Object.assign(p.value,t.pageOption),t.dragColEnable&&N(t.columns);const d=s({expandItemRefs:{},customRow:()=>({}),tableData:[],actions:t.columns.find((t=>[t.dataIndex,t.key].includes("action")))?.actions||[],loading:!1});c((()=>t.dataSource),(t=>{t&&(d.tableData=t)}),{deep:!0,immediate:!0});const u=async(e={},o=!1)=>{if(Object.is(t.dataSource,void 0)&&Object.prototype.toString.call(t.getListFunc).includes("Function")){const a={pageNumber:o?1:p.value.current,pageSize:p.value.pageSize,...t.pageOption,...e};d.loading=!0;const{data:n,pageNumber:r,pageSize:l,total:s}=await(t?.getListFunc?.(a).finally((()=>d.loading=!1)));Object.assign(p.value,{current:~~r,pageSize:~~l,total:~~s}),d.tableData=n}if(t.showSummary){const{pageSize:e,current:o}=p.value,a=Math.max(e,o*e),n=Object.is(t.dataSource,void 0)?d.tableData:d.tableData.slice(a-e,a);l({columns:t.columns,dataSource:n,tableRef:r,sumText:t.sumText,summaryFunc:t.summaryFunc})}t.dragRowEnable&&(d.customRow=function(t){let e,o;return a=>({draggable:!0,ondrag(t){e=a},ondrop(t){o=a},ondragend(a){if(e!==o){const a=t.indexOf(e),n=t.indexOf(o);[t[a],t[n]]=[t[n],t[a]]}},ondragover:t=>!1})}(d.tableData))};u();return{...i(d),tableRef:r,pageOptions:p,buttonProps:{size:"small"},actionEvent:async(e,o,a="")=>{await o({record:e,props:t},(()=>setTimeout((()=>u())))),"del"==a&&d.tableData.length<2&&(p.value.current=Math.max(1,p.value.current-1))},refreshTableData:u,paginationChange:(e,o,n,{currentDataSource:r})=>{const{field:l,order:s}=n;p.value={...p.value,...e},u({pageSize:e.pageSize,pageNumber:e.current,...t.pageOption,...o,field:l,order:s}),a("change",e,o,n,{currentDataSource:r})}}}}));d("data-v-fedbcd46");const W=z(" 您确定要删除吗？ ");u(),M.render=function(t,e,o,a,n,r){const p=m("a-button"),l=m("a-popconfirm"),s=m("Table"),c=f("permission");return b(),v(s,k({ref:"tableRef",columns:t.columns,loading:t.loading,rowSelection:t.rowSelection,rowKey:t.rowKey,size:"middle","data-source":t.tableData,pagination:t.pageOptions,bordered:"",customRow:t.customRow},t.$attrs,{onChange:t.paginationChange}),g({_:2},[h(t.$slots,((e,o)=>({name:o,fn:x((e=>[w(t.$slots,o,y(S(e)),void 0,!0)]))}))),h(t.columns.filter((t=>!!t.slots?.customRender)),(e=>({name:e.slots.customRender,fn:x((o=>[e.slots?.customRender&&t.$slots[e.slots?.customRender]?w(t.$slots,e.slots?.customRender,y(k({key:0},o)),void 0,!0):(b(),O(C,{key:1},["action"!==e.slots?.customRender?(b(),O(C,{key:0},["component"==e.slotsType?(b(),v(R(e?.slotsFunc?.(o.record)),{key:0})):T("",!0),"format"==e.slotsType?(b(),O(C,{key:1},[z(j(e?.slotsFunc?.(o.record[e.dataIndex??e.key],o.record)),1)],64)):T("",!0)],64)):T("",!0),"action"==e.slots?.customRender?(b(),O("div",{key:e.slots.customRender,class:"actions"},[(b(!0),O(C,null,h(t.actions,((e,a)=>(b(),O(C,null,["button"===e.type?D((b(),v(p,k({key:0},{...t.buttonProps,...e.props},{key:a,onClick:a=>t.actionEvent(o.record,e.func)}),{default:x((()=>[z(j(e.text),1)])),_:2},1040,["onClick"])),[[c,e.permission]]):T("",!0),"popconfirm"===e.type?(b(),v(l,{key:a,placement:"leftTop",onConfirm:a=>t.actionEvent(o.record,e.func,"del")},{title:x((()=>[W])),default:x((()=>[D(E(p,y(S({...t.buttonProps,...e.props})),{default:x((()=>[z(j(e.text),1)])),_:2},1040),[[c,e.permission]])])),_:2},1032,["onConfirm"])):T("",!0)],64)))),256))])):T("",!0)],64))]))})))]),1040,["columns","loading","rowSelection","rowKey","data-source","pagination","customRow","onChange"])},M.__scopeId="data-v-fedbcd46";const A=a({name:"TableQueryHeader",components:{DownOutlined:_},props:{defaultShowItems:{type:Number,default:2}},setup(t,{slots:e}){const o=s({advanced:!1,labelMap:{}}),a=L((()=>Object.keys(e).slice(0,t.defaultShowItems))),n=L((()=>Object.keys(e).slice(t.defaultShowItems).filter((t=>"buttons"!==t)))),r=L((()=>(o.advanced?.5:0)+"turn"));return{...i(o),turn:r,defaultShowSlots:a,advancedShowSlots:n,calcSubBtnOffset:a=>{const n=(o.advanced?Object.keys(e).length:t.defaultShowItems)*a,r=n%24;return n<24||0===r?0:24-r},setLabel:t=>e=>{o.labelMap[t]=e},toggleAdvanced:()=>{o.advanced=!o.advanced}}}}),X=()=>{B((t=>({"7cb6967a":t.turn})))},H=A.setup;A.setup=H?(t,e)=>(X(),H(t,e)):X;var q=t("a",A);q.render=function(t,e,o,a,n,r){const p=m("a-form-item"),l=m("a-col"),s=m("DownOutlined"),c=m("a-row"),i=m("a-form");return b(),v(i,{layout:"inline"},{default:x((()=>[E(c,{gutter:[24,24]},{default:x((()=>[(b(!0),O(C,null,h(t.defaultShowSlots,(e=>(b(),v(l,{key:e,md:8,sm:24},{default:x((()=>[E(p,{label:t.labelMap[e]||""},{default:x((()=>[w(t.$slots,e,{setLabel:t.setLabel(e)},void 0,!0)])),_:2},1032,["label"])])),_:2},1024)))),128)),t.advanced?(b(!0),O(C,{key:0},h(t.advancedShowSlots,(e=>(b(),v(l,{key:e,md:8,sm:24},{default:x((()=>[E(p,{label:t.labelMap[e]||""},{default:x((()=>[w(t.$slots,e,{setLabel:t.setLabel(e)},void 0,!0)])),_:2},1032,["label"])])),_:2},1024)))),128)):T("",!0),E(l,{md:{span:8,offset:t.calcSubBtnOffset(8)},sm:24},{default:x((()=>[F("span",{class:"table-page-search-submitButtons",style:$(t.advanced&&{float:"right",overflow:"hidden"}||{})},[w(t.$slots,"buttons",{},void 0,!0),8*Object.keys(t.$slots).length>24?(b(),O("a",{key:0,style:{"margin-left":"8px"},onClick:e[0]||(e[0]=(...e)=>t.toggleAdvanced&&t.toggleAdvanced(...e))},[z(j(t.advanced?"收起":"展开")+" ",1),E(s,{class:"collapse-icon"})])):T("",!0)],4)])),_:3},8,["md"])])),_:3})])),_:3})},q.__scopeId="data-v-4bfdf15e"}}}))}();
